{"ast":null,"code":"var __jsx = React.createElement;\nimport React from 'react';\nimport Layout from '../../components/shared/layout/Layout';\nimport Header from '../../components/header/Header';\nimport UserComponent from '../../components/user/User';\n\nconst UserDetails = ({\n  user,\n  tasks,\n  errorCode\n}) => {\n  return __jsx(Layout, {\n    title: \"User page\",\n    errorCode: errorCode\n  }, __jsx(Header, null), user && __jsx(UserComponent, {\n    solutions: user._solutions,\n    login: user.login,\n    photo: user.photo,\n    tasks: tasks\n  }));\n};\n\n// todo: PoprawiÄ‡ na odp. zapytanie z bazy\nconst filterTasks = (tasks, user) => {\n  return tasks.filter(task => {\n    if (!user || !user._tasks) {\n      return null;\n    }\n\n    user._tasks.includes(task._id);\n  });\n};\n\nexport const getServerSideProps = async ({\n  params\n}) => {\n  const res = await fetch(`${process.env.API_URL}/users/${params === null || params === void 0 ? void 0 : params.userId}`);\n  const res1 = await fetch(`${process.env.API_URL}/tasks`);\n  const errorCode = res.ok ? false : res.status;\n\n  if (!errorCode) {\n    const user = await res.json();\n    const tasks = await res1.json();\n    return {\n      props: {\n        user,\n        tasks: await filterTasks(tasks, user)\n      }\n    };\n  } else return {\n    props: {\n      errorCode\n    }\n  };\n};\nexport default UserDetails;","map":null,"metadata":{},"sourceType":"module"}